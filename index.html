<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8" />
    <title>卡優比 CardUbi - 您的智慧刷卡顧問</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Favicon using SVG Data URI with Credit Card emoji -->
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>💳</text></svg>">
    <link rel="stylesheet" href="style.css" />
    <!-- 引入 Font Awesome 用於圖示 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <div class="fluid-background-container" aria-hidden="true"></div>

    <header>
        <div class="container">
            <div class="header-top">
                <div class="logo-area">
                    <div class="logo-container">
                        <h1 class="logo-main">卡優比 <span class="highlight">AI</span></h1>
                        <div class="logo-reveal-text">
                            <span class="reveal-char">較</span>
                            <span class="reveal-char">Ka</span>
                            <span class="reveal-char">-</span>
                            <span class="reveal-char">優</span>
                            <span class="reveal-char">U</span>
                            <span class="reveal-char">-</span>
                            <span class="reveal-char">惠</span>
                            <span class="reveal-char">Bi</span>
                        </div>
                    </div>
                    <p class="subtitle header-hideable">CardUbi 您的專屬消費管家</p>
                </div>

                <div class="header-stats-group header-hideable">
                    <!-- 即時跳動儀表板 (裝飾用) -->
                    <div class="live-stats-container">
                        <div class="live-stat">
                            <i class="fa-solid fa-plane-departure"></i>
                            <div class="stat-info">
                                <span class="label">累積里程</span>
                                <span class="number" id="miles-ticker">0</span>
                            </div>
                        </div>
                        <div class="live-stat">
                            <i class="fa-solid fa-coins"></i>
                            <div class="stat-info">
                                <span class="label">全站回饋金</span>
                                <span class="number" id="cashback-ticker">0</span>
                            </div>
                        </div>
                    </div>

                    <!-- ▼▼▼ (修復) 加回真實統計數據 ▼▼▼ -->
                    <div class="real-stats-box">
                        <div class="stat-item">
                            <span class="label">瀏覽人次：</span>
                            <span id="page-views" class="value">--</span>
                        </div>
                        <div class="stat-item">
                            <span class="label">平台訂閱：</span>
                            <span id="subscribe-clicks" class="value">--</span>
                        </div>
                        <div class="stat-item">
                            <span class="label">卡片追蹤：</span>
                            <span id="card-subscribes" class="value">--</span>
                        </div>
                    </div>
                    <!-- ▲▲▲ (修復) 加回真實統計數據 ▲▲▲ -->
                </div>

                <!-- 會員區塊 User Area -->
                <div class="user-area" id="user-area">
                    <button id="google-login-btn" class="google-login-btn">
                        <i class="fa-brands fa-google"></i>
                        <span>登入</span>
                    </button>
                    <div id="user-profile" class="user-profile" style="display: none;">
                        <img id="user-avatar" class="user-avatar" src="" alt="用戶頭像">
                        <div class="user-info">
                            <span id="user-name" class="user-name">會員</span>
                            <button id="logout-btn" class="logout-btn">登出</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 訂閱按鈕 -->
            <div class="subscribe-area header-hideable" style="margin-top: 1rem; text-align: right;">
                <button id="subscribe-btn" class="subscribe-btn">
                    ⭐ 訂閱這個平台
                </button>
            </div>

            <!-- 搜尋欄位 -->

        </div>
    </header>

    <!-- Insider Vault 專區 (原 Urgent Zone) -->
    <section class="urgent-zone insider-vault">
        <div class="container">
            <div class="urgent-header">
                <span class="urgent-icon">🔒</span>
                <h3>卡優比精選隱藏優惠</h3>
                <span class="urgent-countdown" id="urgent-countdown">今日精選</span>
            </div>
            <div class="vault-subtitle">
                <p>精選4 家銀行 App 內限定隱藏優惠</p>
                <p class="scarcity-disclosure">登入銀行 App 才能看到（外部網站搜尋不到）</p>
            </div>
            <div class="urgent-scroll-container">
                <div class="urgent-cards" id="urgent-cards">
                    <!-- Vault cards will be dynamically loaded by JavaScript -->
                </div>
            </div>
        </div>
    </section>

    <main>
        <div class="container">

            <!-- 廣告 Banner -->
            <div class="ad-banner">
                <span class="ad-watermark">廣告 banner</span>
                <div class="ad-content">
                    <span class="ad-badge">贊助</span>
                    <h3>緯育 TibaMe</h3>
                    <p>提拔我的學習力，提升職場競爭力 | 全方位數位人才培訓</p>
                    <a href="https://www.tibame.com/" target="_blank" class="ad-btn">立即試聽</a>
                </div>
                <div class="ad-logo">
                    <img src="https://www.tibame.com/static/img/tibame-logo.svg" alt="TibaMe Logo"
                        onerror="this.parentElement.innerHTML='<span class=\'ad-logo-text\'><span class=\'ad-logo-zh\'>緯育</span> <span class=\'ad-logo-en\'>TibaMe</span></span>'">
                </div>
                <div class="ad-bg-effect"></div>
            </div>



            <div class="content-grid">
                <!-- 左側主內容 -->
                <div class="main-content">

                    <!-- Apple-Style 現金回饋計算器 (Moved Here) -->
                    <section class="calculator-zone">
                        <div class="section-header">
                            <h2><i class="fa-solid fa-calculator"></i> 現金回饋計算器</h2>
                            <span class="tag-pulse">Smart Rate 3.5%</span>
                        </div>
                        <div class="calculator-container">
                            <div class="calculator-input-group">
                                <div class="input-label">消費金額 (TWD)</div>
                                <div class="big-number-display">
                                    <span id="cashback-amount">50,000</span>
                                    <span class="currency">TWD</span>
                                </div>
                                <div class="slider-container">
                                    <input type="range" id="cashback-slider" class="premium-slider ios-slider" min="0"
                                        max="100000" step="1000" value="50000">
                                </div>
                            </div>
                            <div class="calculator-result">
                                <div class="result-label">預估現金回饋</div>
                                <div class="big-number-display">
                                    <span id="cashback-result">1,750</span>
                                    <span class="currency">TWD</span>
                                </div>
                                <div class="result-note">基於 Smart Rate 3.5% 計算</div>
                            </div>
                        </div>
                    </section>
                    <div class="section-header">
                        <h2><i class="fa-solid fa-calculator"></i> 現金回饋計算器</h2>
                        <span class="tag-pulse">Smart Rate 3.5%</span>
                    </div>
                    <div class="calculator-container">
                        <div class="calculator-input-group">
                            <div class="input-label">消費金額 (TWD)</div>
                            <div class="big-number-display">
                                <span id="cashback-amount">50,000</span>
                                <span class="currency">TWD</span>
                            </div>
                            <div class="slider-container">
                                <input type="range" id="cashback-slider" class="premium-slider ios-slider" min="0"
                                    max="100000" step="1000" value="50000">
                            </div>
                        </div>
                        <div class="calculator-result">
                            <div class="result-label">預估現金回饋</div>
                            <div class="big-number-display">
                                <span id="cashback-result">1,750</span>
                                <span class="currency">TWD</span>
                            </div>
                            <div class="result-note">基於 Smart Rate 3.5% 計算</div>
                        </div>
                    </div>
                    </section>

                    <!-- 百貨優惠整合 -->




                    <!-- 雙層篩選系統 -->
                    <section class="filter-controls">
                        <div class="filter-row-group">
                            <label><i class="fa-solid fa-building-columns"></i> 發卡銀行</label>
                            <div class="filters" id="bank-filters">
                                <button class="filter-btn active" data-filter="all">全部</button>
                                <button class="filter-btn" data-filter="fubon">富邦</button>
                                <button class="filter-btn" data-filter="dbs">星展</button>
                                <button class="filter-btn" data-filter="union">聯邦</button>
                                <button class="filter-btn" data-filter="hsbc">滙豐</button>
                            </div>
                        </div>
                        <div class="filter-row-group">
                            <label><i class="fa-solid fa-credit-card"></i> 卡片類型</label>
                            <div class="filters" id="type-filters">
                                <button class="filter-btn active" data-filter="all">全部</button>
                                <button class="filter-btn" data-filter="miles">哩程卡</button>
                                <button class="filter-btn" data-filter="cash">現金回饋</button>
                                <button class="filter-btn" data-filter="points">點數卡</button>
                            </div>
                        </div>
                    </section>

                    <!-- 優惠列表 -->
                    <div class="card-list" id="offer-list">
                        <!-- 卡片 1: Fubon J Card -->
                        <article class="card" data-bank="fubon" data-type="cash" data-keywords="網購 海外 旅遊">
                            <div class="card-header">
                                <span class="card-bank">富邦銀行</span>
                                <button class="card-subscribe-btn" title="追蹤此卡">⭐</button>
                            </div>
                            <div class="card-image-container">
                                <img src="images/fubon-j.jpg" alt="富邦 J 卡示意圖" class="card-image">
                            </div>
                            <div class="card-title">富邦 J 卡 日本消費最高 5%</div>
                            <div class="card-body">
                                <div class="card-meta">
                                    <span class="badge travel">旅遊</span>
                                    <span class="badge shopping">海外</span>
                                    <span>期限：2026/2/28</span>
                                </div>
                                <button class="calendar-btn" onclick="handleCardApply('富邦 J 卡')">
                                    <i class="fa-solid fa-paper-plane"></i> 我要申請
                                </button>
                            </div>
                        </article>

                        <!-- 卡片 2: DBS eco Card -->
                        <article class="card" data-bank="dbs" data-type="points" data-keywords="環保 綠色 永續">
                            <div class="card-header">
                                <span class="card-bank">星展銀行</span>
                                <button class="card-subscribe-btn" title="追蹤此卡">⭐</button>
                            </div>
                            <div class="card-image-container">
                                <img src="images/dbs-eco.jpg" alt="星展 eco 永續卡示意圖" class="card-image">
                            </div>
                            <div class="card-title">星展 eco 永續卡 綠色消費 3%</div>
                            <div class="card-body">
                                <div class="card-meta">
                                    <span class="badge shopping">環保</span>
                                    <span class="badge digital">永續</span>
                                </div>
                                <button class="calendar-btn" onclick="handleCardApply('星展 eco 永續卡')">
                                    <i class="fa-solid fa-paper-plane"></i> 我要申請
                                </button>
                            </div>
                        </article>

                        <!-- 卡片 3: Union Jihe Card -->
                        <article class="card" data-bank="union" data-type="cash" data-keywords="百貨 餐飲 交通">
                            <div class="card-header">
                                <span class="card-bank">聯邦銀行</span>
                                <button class="card-subscribe-btn" title="追蹤此卡">⭐</button>
                            </div>
                            <div class="card-image-container">
                                <img src="images/federal-jihe.jpg" alt="聯邦吉鶴卡示意圖" class="card-image">
                            </div>
                            <div class="card-title">聯邦吉鶴卡 日本消費最高 10%</div>
                            <div class="card-body">
                                <div class="card-meta">
                                    <span class="badge travel">旅遊</span>
                                    <span class="badge food">餐飲</span>
                                </div>
                                <button class="calendar-btn" onclick="handleCardApply('聯邦吉鶴卡')">
                                    <i class="fa-solid fa-paper-plane"></i> 我要申請
                                </button>
                            </div>
                        </article>

                        <!-- 卡片 4: HSBC Live+ Card -->
                        <article class="card" data-bank="hsbc" data-type="cash" data-keywords="娛樂 影音 串流">
                            <div class="card-header">
                                <span class="card-bank">滙豐銀行</span>
                                <button class="card-subscribe-btn" title="追蹤此卡">⭐</button>
                            </div>
                            <div class="card-image-container">
                                <img src="images/hsbc-live.jpg" alt="滙豐 Live+ 卡示意圖" class="card-image">
                            </div>
                            <div class="card-title">滙豐 Live+ 卡 影音娛樂 8%</div>
                            <div class="card-body">
                                <div class="card-meta">
                                    <span class="badge entertainment">娛樂</span>
                                    <span class="badge digital">串流</span>
                                </div>
                                <button class="calendar-btn" onclick="handleCardApply('滙豐 Live+ 卡')">
                                    <i class="fa-solid fa-paper-plane"></i> 我要申請
                                </button>
                            </div>
                        </article>
                    </div>
                </div>

                <!-- AI 顧問 (右側欄) -->
                <aside class="ai-sidebar">
                    <div class="ai-container">
                        <div class="ai-header">
                            <div class="ai-avatar">
                                <i class="fa-solid fa-robot"></i>
                            </div>
                            <div class="ai-title">
                                <h3>AI 刷卡顧問</h3>
                                <span class="status-dot"></span> 線上
                            </div>
                        </div>
                        <div class="chat-history" id="chat-history">
                            <div class="message bot">
                                <p>您好！我是卡優比的 AI 顧問。告訴我您想買什麼（例如：「我要去日本買電器」或「今天要吃王品牛排」），我幫您推薦最划算的卡！</p>
                            </div>
                        </div>
                        <div class="chat-input-area">
                            <input type="text" id="chat-input" placeholder="輸入消費情境...">
                            <button id="send-btn"><i class="fa-solid fa-paper-plane"></i></button>
                        </div>
                        <div class="api-key-area">
                            <input type="password" id="gemini-api-key" placeholder="貼上 Gemini API Key 以啟用">
                        </div>
                    </div>
                </aside>
            </div>

            <!-- AI 每週內容中心 -->
            <section class="content-hub">
                <div class="section-header">
                    <h2><i class="fa-solid fa-newspaper"></i> AI 每週內容精選</h2>
                    <span class="tag-pulse">最新趨勢</span>
                </div>
                <div class="content-grid-hub" id="content-grid">
                    <!-- 內容卡片將由 JavaScript 動態生成 -->
                </div>
            </section>

            <!-- 理財達人分享 (原 Info Section) -->
            <section class="info-section" id="info-section">
                <div class="info-header">
                    <h2><i class="fa-brands fa-instagram"></i> 理財達人分享</h2>
                </div>
                <!-- 復用 info-grid 3欄位 CSS Grid，移除 collapsed 邏輯，保留 info-box 3D特效 -->
                <div class="info-grid" id="info-grid">
                    <!-- 貼文 1 -->
                    <div class="info-box ig-box">
                        <blockquote class="instagram-media" data-instgrm-captioned
                            data-instgrm-permalink="https://www.instagram.com/p/DTg9nAyE__N/?utm_source=ig_embed&amp;utm_campaign=loading"
                            data-instgrm-version="14"
                            style=" background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:540px; min-width:326px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);">
                        </blockquote>
                    </div>
                    <!-- 貼文 2 -->
                    <div class="info-box ig-box">
                        <blockquote class="instagram-media" data-instgrm-captioned
                            data-instgrm-permalink="https://www.instagram.com/reel/DTe_-i0kxmZ/?utm_source=ig_embed&amp;utm_campaign=loading"
                            data-instgrm-version="14"
                            style=" background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:540px; min-width:326px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);">
                        </blockquote>
                    </div>
                    <!-- 貼文 3 -->
                    <div class="info-box ig-box">
                        <blockquote class="instagram-media" data-instgrm-captioned
                            data-instgrm-permalink="https://www.instagram.com/p/DTe_VVCkyBe/?utm_source=ig_embed&amp;utm_campaign=loading"
                            data-instgrm-version="14"
                            style=" background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:540px; min-width:326px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);">
                        </blockquote>
                    </div>
                </div>
                <script async src="//www.instagram.com/embed.js"></script>
            </section>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>卡優比 CardUbi - 此頁為示範用前端，優惠內容皆為虛構範例。</p>
            <p>AI 服務由 Google Gemini 提供技術支援</p>
        </div>
    </footer>

    <script type="module" src="script.js"></script>
</body>

</html>